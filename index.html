<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Investment-Pitch Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; background: #f8f9fb;}
        h1 { color: #2c3e50;}
        table { border-collapse: collapse; width: 100%; margin-bottom: 1.5em;}
        th, td { padding: 0.8em 1em; border: 1px solid #ccc; }
        th { background: #e7ecef; }
        .section { margin-bottom: 2em; }
        .pitch-details { background: #f2f6fa; padding: 1em; border-radius: 8px;}
        .todo { color: #1b7b34; }
    </style>
</head>
<body>
<h1>Daily Investment-Pitch Dashboard</h1>
<div class="section">
    <h2>Übersicht aller Pitches</h2>
    <table id="overview">
        <tr>
            <th>Pitch-Name</th>
            <th>Letztes Update</th>
            <th>Wichtigste Neuerung</th>
            <th>Status/Kommentar</th>
        </tr>
        <!-- Zeilen werden per JS hinzugefügt -->
    </table>
</div>
<div class="section pitch-details" id="details">
    <h2>Detail-Updates</h2>
    <!-- Pitch-Detailblöcke werden per JS hinzugefügt -->
</div>
<script>
// Unternehmensliste mit Ticker-Symbolen
const companies = [
    { name: 'ANGI Inc.', symbol: 'ANGI', exchange: 'NASDAQ' },
    { name: 'IAC Inc', symbol: 'IAC', exchange: 'NASDAQ' },
    { name: 'Northern Dynasty Minerals', symbol: 'NAK', exchange: 'NYSEAMERICAN' }
];

// Funktion zum Laden von Live-Finanzdaten
async function fetchCompanyData(symbol) {
    try {
        // Verwende Yahoo Finance Alternative API (kostenlos, kein API-Key nötig)
        const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=5d`);
        const data = await response.json();
        
        if (data.chart && data.chart.result && data.chart.result[0]) {
            const result = data.chart.result[0];
            const meta = result.meta;
            const quote = result.indicators.quote[0];
            
            // Aktuelle Preisdaten
            const currentPrice = meta.regularMarketPrice || 'N/A';
            const previousClose = meta.previousClose || 'N/A';
            const change = currentPrice !== 'N/A' && previousClose !== 'N/A' 
                ? ((currentPrice - previousClose) / previousClose * 100).toFixed(2) 
                : 'N/A';
            
            return {
                price: currentPrice,
                change: change,
                volume: meta.regularMarketVolume || 'N/A',
                marketCap: meta.marketCap || 'N/A'
            };
        }
    } catch (error) {
        console.error(`Fehler beim Laden von ${symbol}:`, error);
    }
    return null;
}

// Funktion zum Abrufen der neuesten News
async function fetchCompanyNews(companyName) {
    try {
        // Nutze eine kostenlose News API oder Web Scraping Alternative
        // Hinweis: Für echte Implementierung würde man NewsAPI oder ähnliche nutzen
        const searchQuery = encodeURIComponent(companyName);
        
        // Platzhalter - würde normalerweise echte News API aufrufen
        return {
            headline: `Aktuelle Entwicklungen bei ${companyName}`,
            summary: 'Live-Daten werden geladen...'
        };
    } catch (error) {
        console.error(`Fehler beim Laden der News für ${companyName}:`, error);
    }
    return { headline: 'Keine aktuellen News', summary: '' };
}

// Hauptfunktion zum Laden und Anzeigen aller Daten
async function loadDashboard() {
    const overview = document.getElementById('overview');
    const details = document.getElementById('details');
    
    // Ladeanzeige
    overview.innerHTML = '<tr><td colspan="4" style="text-align:center;">Lade aktuelle Daten...</td></tr>';
    details.innerHTML = '<p>Lade Details...</p>';
    
    for (const company of companies) {
        // Lade Finanzdaten
        const stockData = await fetchCompanyData(company.symbol);
        const newsData = await fetchCompanyNews(company.name);
        
        if (stockData) {
            // Aktuelles Datum
            const today = new Date().toLocaleDateString('de-DE');
            
            // Bestimme Status basierend auf Kursänderung
            let status = 'Neutral';
            if (stockData.change !== 'N/A') {
                const changeNum = parseFloat(stockData.change);
                if (changeNum > 2) status = 'Stark positiv ↑';
                else if (changeNum > 0) status = 'Leicht positiv ↑';
                else if (changeNum < -2) status = 'Stark negativ ↓';
                else if (changeNum < 0) status = 'Leicht negativ ↓';
            }
            
            // Fülle Tabelle
            const row = document.createElement('tr');
            row.innerHTML = `<td><strong>${company.name}</strong> (${company.symbol})</td>
                <td>${today}</td>
                <td>Kurs: $${stockData.price} (${stockData.change > 0 ? '+' : ''}${stockData.change}%)</td>
                <td>${status}</td>`;
            overview.appendChild(row);
            
            // Fülle Details
            const block = document.createElement('div');
            block.innerHTML = `<h3>${company.name} (${company.symbol})</h3>
                <ul>
                    <li><strong>Aktueller Kurs:</strong> $${stockData.price}</li>
                    <li><strong>Tagesänderung:</strong> ${stockData.change}%</li>
                    <li><strong>Handelsvolumen:</strong> ${new Intl.NumberFormat('de-DE').format(stockData.volume)}</li>
                    <li><strong>Marktkapitalisierung:</strong> $${new Intl.NumberFormat('de-DE').format(stockData.marketCap)}</li>
                    <li><strong>Letztes Update:</strong> ${today} (Live-Daten)</li>
                </ul>`;
            details.appendChild(block);
        }
    }
}

// Dashboard beim Laden der Seite initialisieren
loadDashboard();

// Optional: Alle 5 Minuten aktualisieren
setInterval(loadDashboard, 5 * 60 * 1000);
</script>>
</body>
</html>
<!-- Force rebuild -->
